{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.238.0"},"children":{"SingletonIntegTest":{"id":"SingletonIntegTest","path":"SingletonIntegTest","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.238.0"},"children":{"Create1":{"id":"Create1","path":"SingletonIntegTest/Create1","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.238.0"}},"Flow1":{"id":"Flow1","path":"SingletonIntegTest/Flow1","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachineFragment","version":"2.238.0"},"children":{"Update":{"id":"Update","path":"SingletonIntegTest/Flow1/Update","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.238.0"}},"Delete":{"id":"Delete","path":"SingletonIntegTest/Flow1/Delete","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.238.0"}},"Which Request Type?":{"id":"Which Request Type?","path":"SingletonIntegTest/Flow1/Which Request Type?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.238.0"}},"Initialize":{"id":"Initialize","path":"SingletonIntegTest/Flow1/Initialize","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.238.0"}}}},"Create2":{"id":"Create2","path":"SingletonIntegTest/Create2","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.238.0"}},"Flow2":{"id":"Flow2","path":"SingletonIntegTest/Flow2","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachineFragment","version":"2.238.0"},"children":{"Update":{"id":"Update","path":"SingletonIntegTest/Flow2/Update","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.238.0"}},"Delete":{"id":"Delete","path":"SingletonIntegTest/Flow2/Delete","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.238.0"}},"Which Request Type?":{"id":"Which Request Type?","path":"SingletonIntegTest/Flow2/Which Request Type?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.238.0"}},"Initialize":{"id":"Initialize","path":"SingletonIntegTest/Flow2/Initialize","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.238.0"}}}},"StateMachine1":{"id":"StateMachine1","path":"SingletonIntegTest/StateMachine1","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.238.0"},"children":{"Role":{"id":"Role","path":"SingletonIntegTest/StateMachine1/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"SingletonIntegTest/StateMachine1/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"}}}}}},"Resource":{"id":"Resource","path":"SingletonIntegTest/StateMachine1/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":"{\"StartAt\":\"Initialize\",\"States\":{\"Initialize\":{\"Type\":\"Pass\",\"QueryLanguage\":\"JSONata\",\"Next\":\"Which Request Type?\",\"Assign\":{\"RequestType\":\"{% $states.input.RequestType %}\",\"StackId\":\"{% $states.input.StackId %}\",\"RequestId\":\"{% $states.input.RequestId %}\",\"ResourceType\":\"{% $states.input.ResourceType %}\",\"LogicalResourceId\":\"{% $states.input.LogicalResourceId %}\",\"PhysicalResourceId\":\"{% $exists($states.input.PhysicalResourceId) ? $states.input.PhysicalResourceId : null %}\",\"ResourceProperties\":\"{% $states.input.ResourceProperties %}\",\"OldResourceProperties\":\"{% $exists($states.input.OldResourceProperties) ? $states.input.OldResourceProperties : null %}\"}},\"Which Request Type?\":{\"Type\":\"Choice\",\"QueryLanguage\":\"JSONata\",\"Choices\":[{\"Condition\":\"{% $RequestType = \\\"Create\\\" %}\",\"Next\":\"Create1\"},{\"Condition\":\"{% $RequestType = \\\"Update\\\" %}\",\"Next\":\"Update\"},{\"Condition\":\"{% $RequestType = \\\"Delete\\\" %}\",\"Next\":\"Delete\"}]},\"Create1\":{\"Type\":\"Pass\",\"QueryLanguage\":\"JSONata\",\"Output\":{\"PhysicalResourceId\":\"resource-1\",\"Data\":{\"message\":\"{% $states.input.ResourceProperties.value %}\"}},\"End\":true},\"Update\":{\"Type\":\"Pass\",\"QueryLanguage\":\"JSONata\",\"End\":true},\"Delete\":{\"Type\":\"Pass\",\"QueryLanguage\":\"JSONata\",\"End\":true}}}","roleArn":{"Fn::GetAtt":["StateMachine1RoleDE82F282","Arn"]}}}}}},"CustomResource1":{"id":"CustomResource1","path":"SingletonIntegTest/CustomResource1","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"},"children":{"Resource":{"id":"Resource","path":"SingletonIntegTest/CustomResource1/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.238.0"},"children":{"Default":{"id":"Default","path":"SingletonIntegTest/CustomResource1/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}}}},"Policy":{"id":"Policy","path":"SingletonIntegTest/CustomResource1/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"SingletonIntegTest/CustomResource1/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Ref":"StateMachine18AFC9B86"}}],"Version":"2012-10-17"},"policyName":"CustomResource1Policy0DF66551","roles":[{"Ref":"LambdalessProviderStateMachineRole4BDCD64E"}]}}}}}}},"LambdalessProvider":{"id":"LambdalessProvider","path":"SingletonIntegTest/LambdalessProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"},"children":{"Topic":{"id":"Topic","path":"SingletonIntegTest/LambdalessProvider/Topic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"SingletonIntegTest/LambdalessProvider/Topic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{}}}}},"Queue":{"id":"Queue","path":"SingletonIntegTest/LambdalessProvider/Queue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"SingletonIntegTest/LambdalessProvider/Queue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{}}},"Policy":{"id":"Policy","path":"SingletonIntegTest/LambdalessProvider/Queue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"SingletonIntegTest/LambdalessProvider/Queue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Condition":{"ArnEquals":{"aws:SourceArn":{"Ref":"LambdalessProviderTopic58DC2415"}}},"Effect":"Allow","Principal":{"Service":"sns.amazonaws.com"},"Resource":{"Fn::GetAtt":["LambdalessProviderQueue3E954037","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"LambdalessProviderQueue3E954037"}]}}}}},"SingletonIntegTestLambdalessProviderTopic207F8738":{"id":"SingletonIntegTestLambdalessProviderTopic207F8738","path":"SingletonIntegTest/LambdalessProvider/Queue/SingletonIntegTestLambdalessProviderTopic207F8738","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Subscription","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"SingletonIntegTest/LambdalessProvider/Queue/SingletonIntegTestLambdalessProviderTopic207F8738/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnSubscription","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Subscription","aws:cdk:cloudformation:props":{"endpoint":{"Fn::GetAtt":["LambdalessProviderQueue3E954037","Arn"]},"protocol":"sqs","topicArn":{"Ref":"LambdalessProviderTopic58DC2415"}}}}}}}},"Connection":{"id":"Connection","path":"SingletonIntegTest/LambdalessProvider/Connection","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Connection","version":"2.238.0"},"children":{"Connection":{"id":"Connection","path":"SingletonIntegTest/LambdalessProvider/Connection/Connection","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnConnection","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Connection","aws:cdk:cloudformation:props":{"authorizationType":"API_KEY","authParameters":{"apiKeyAuthParameters":{"apiKeyName":"dummy","apiKeyValue":"dummy"}}}}}}},"Initialize":{"id":"Initialize","path":"SingletonIntegTest/LambdalessProvider/Initialize","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.238.0"}},"Still Running":{"id":"Still Running","path":"SingletonIntegTest/LambdalessProvider/Still Running","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Wait","version":"2.238.0"}},"Start Execution":{"id":"Start Execution","path":"SingletonIntegTest/LambdalessProvider/Start Execution","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.CallAwsService","version":"2.238.0"}},"Describe Execution":{"id":"Describe Execution","path":"SingletonIntegTest/LambdalessProvider/Describe Execution","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.CallAwsService","version":"2.238.0"}},"Response to CloudFormation":{"id":"Response to CloudFormation","path":"SingletonIntegTest/LambdalessProvider/Response to CloudFormation","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.HttpInvoke","version":"2.238.0"}},"Is finished?":{"id":"Is finished?","path":"SingletonIntegTest/LambdalessProvider/Is finished?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.238.0"}},"Given workflow was failed":{"id":"Given workflow was failed","path":"SingletonIntegTest/LambdalessProvider/Given workflow was failed","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.238.0"}},"StateMachine":{"id":"StateMachine","path":"SingletonIntegTest/LambdalessProvider/StateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.238.0"},"children":{"Role":{"id":"Role","path":"SingletonIntegTest/LambdalessProvider/StateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"SingletonIntegTest/LambdalessProvider/StateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SingletonIntegTest/LambdalessProvider/StateMachine/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"SingletonIntegTest/LambdalessProvider/StateMachine/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["states:describeExecution","states:startExecution"],"Effect":"Allow","Resource":"*"},{"Action":"events:RetrieveConnectionCredentials","Effect":"Allow","Resource":{"Fn::GetAtt":["LambdalessProviderConnection803AC994","Arn"]}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::GetAtt":["LambdalessProviderConnection803AC994","SecretArn"]}},{"Action":"states:InvokeHTTPEndpoint","Condition":{"StringLike":{"states:HTTPEndpoint":"*"}},"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LambdalessProviderStateMachineRoleDefaultPolicy613E8B8C","roles":[{"Ref":"LambdalessProviderStateMachineRole4BDCD64E"}]}}}}}}},"Resource":{"id":"Resource","path":"SingletonIntegTest/LambdalessProvider/StateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"Initialize\",\"States\":{\"Initialize\":{\"Type\":\"Pass\",\"Next\":\"Describe Execution\",\"Assign\":{\"ExecutionArn\":\"{% $replace($states.input.ResourceProperties.stateMachineArn, 'stateMachine', 'execution') & ':' & $states.input.RequestId %}\",\"RequestType\":\"{% $states.input.RequestType %}\",\"ResponseURL\":\"{% $states.input.ResponseURL %}\",\"StackId\":\"{% $states.input.StackId %}\",\"RequestId\":\"{% $states.input.RequestId %}\",\"ResourceType\":\"{% $states.input.ResourceType %}\",\"LogicalResourceId\":\"{% $states.input.LogicalResourceId %}\",\"PhysicalResourceId\":\"{% $exists($states.input.PhysicalResourceId) ? $states.input.PhysicalResourceId : null %}\",\"ResourceProperties\":\"{% $states.input.ResourceProperties %}\",\"OldResourceProperties\":\"{% $exists($states.input.OldResourceProperties) ? $states.input.OldResourceProperties : null %}\"}},\"Describe Execution\":{\"Next\":\"Is finished?\",\"Catch\":[{\"ErrorEquals\":[\"States.ALL\"],\"Next\":\"Start Execution\"}],\"Type\":\"Task\",\"Arguments\":{\"ExecutionArn\":\"{% $ExecutionArn %}\",\"IncludedData\":\"ALL_DATA\"},\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::aws-sdk:sfn:describeExecution\"},\"Still Running\":{\"Type\":\"Wait\",\"Seconds\":1,\"Next\":\"Describe Execution\"},\"Start Execution\":{\"Next\":\"Still Running\",\"Type\":\"Task\",\"Arguments\":{\"Name\":\"{% $RequestId %}\",\"Input\":{\"RequestType\":\"{% $RequestType %}\",\"StackId\":\"{% $StackId %}\",\"RequestId\":\"{% $RequestId %}\",\"ResourceType\":\"{% $ResourceType %}\",\"LogicalResourceId\":\"{% $LogicalResourceId %}\",\"PhysicalResourceId\":\"{% $PhysicalResourceId %}\",\"ResourceProperties\":\"{% $ResourceProperties %}\",\"OldResourceProperties\":\"{% $OldResourceProperties %}\"},\"StateMachineArn\":\"{% $ResourceProperties.stateMachineArn %}\"},\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::aws-sdk:sfn:startExecution\"},\"Is finished?\":{\"Type\":\"Choice\",\"Choices\":[{\"Condition\":\"{% $states.input.Status = 'RUNNING' %}\",\"Next\":\"Still Running\"},{\"Condition\":\"{% $states.input.Status = 'SUCCEEDED' %}\",\"Output\":\"{% $parse($states.input.Output) %}\",\"Next\":\"Response to CloudFormation\"}],\"Default\":\"Given workflow was failed\"},\"Given workflow was failed\":{\"Type\":\"Pass\",\"Output\":{\"Status\":\"FAILED\",\"Reason\":\"{% $states.input.Error & ': ' & $states.input.Cause %}\"},\"Next\":\"Response to CloudFormation\"},\"Response to CloudFormation\":{\"End\":true,\"Type\":\"Task\",\"Arguments\":{\"ApiEndpoint\":\"{% $match($ResponseURL, /(https://[^/]+)\\\\/(.*)\\\\?/).groups[0] & '/' & $match($ResponseURL, /(https://[^/]+)\\\\/(.*)\\\\?/).groups[1] ~> $decodeUrlComponent() %}\",\"Authentication\":{\"ConnectionArn\":\"",{"Fn::GetAtt":["LambdalessProviderConnection803AC994","Arn"]},"\"},\"Method\":\"PUT\",\"RequestBody\":{\"Status\":\"{% $exists($states.input.Status) ? $states.input.Status : 'SUCCESS' %}\",\"StackId\":\"{% $StackId %}\",\"RequestId\":\"{% $RequestId %}\",\"LogicalResourceId\":\"{% $LogicalResourceId %}\",\"Data\":\"{% (\\n            $deepSpread := function($value, $path, $arr) {(\\n                $arr := $arr ? $arr : [];\\n                $t := $type($value);\\n                $result := \\n                $t = \\\"object\\\" ? $each($value, function($v, $k){\\n                    $deepSpread($v, $path ? $path & \\\".\\\" & $k : $k, $arr)\\n                }) : \\n                $t = \\\"array\\\" ? $map($value, function($el, $index){\\n                    $deepSpread($el, $path ? $path & \\\".\\\" & $string($index) : $string($index), $arr)\\n                }) :\\n                {\\n                    $path: $string($value)\\n                };\\n                $append($arr, $result) ~> $merge\\n            )};\\n            $exists($states.input.Data) ? $deepSpread($states.input.Data) : {}\\n            ) %}\",\"NoEcho\":\"{% $exists($states.input.NoEcho) ? $states.input.NoEcho : false %}\",\"PhysicalResourceId\":\"{% $exists($states.input.PhysicalResourceId) ? $states.input.PhysicalResourceId : $RequestId %}\",\"Reason\":\"{% $exists($states.input.Reason) ? $states.input.Reason : '' %}\"},\"QueryParameters\":\"{% $ResponseURL ~> $substringAfter('?') ~> $split('&') ~> $map(function($v) {( $kv := $split($v, '='); {$kv[0]: $decodeUrlComponent($kv[1])} )}) ~> $merge %}\"},\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::http:invoke\"}},\"QueryLanguage\":\"JSONata\"}"]]},"roleArn":{"Fn::GetAtt":["LambdalessProviderStateMachineRole4BDCD64E","Arn"]},"stateMachineType":"EXPRESS"}}}}},"Pipe":{"id":"Pipe","path":"SingletonIntegTest/LambdalessProvider/Pipe","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"},"children":{"Role":{"id":"Role","path":"SingletonIntegTest/LambdalessProvider/Pipe/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"SingletonIntegTest/LambdalessProvider/Pipe/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"pipes.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SingletonIntegTest/LambdalessProvider/Pipe/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"SingletonIntegTest/LambdalessProvider/Pipe/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["LambdalessProviderQueue3E954037","Arn"]}},{"Action":"states:StartSyncExecution","Effect":"Allow","Resource":{"Ref":"LambdalessProviderStateMachine7D8C8128"}}],"Version":"2012-10-17"},"policyName":"LambdalessProviderPipeRoleDefaultPolicy918C6032","roles":[{"Ref":"LambdalessProviderPipeRoleD3BC051F"}]}}}}}}},"Resource":{"id":"Resource","path":"SingletonIntegTest/LambdalessProvider/Pipe/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_pipes.CfnPipe","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Pipes::Pipe","aws:cdk:cloudformation:props":{"description":"Auto generated by AWS CDK Custom Resource","roleArn":{"Fn::GetAtt":["LambdalessProviderPipeRoleD3BC051F","Arn"]},"source":{"Fn::GetAtt":["LambdalessProviderQueue3E954037","Arn"]},"sourceParameters":{"sqsQueueParameters":{"batchSize":1}},"target":{"Ref":"LambdalessProviderStateMachine7D8C8128"},"targetParameters":{"inputTemplate":"<$.body.Message>","stepFunctionStateMachineParameters":{"invocationType":"REQUEST_RESPONSE"}}}}}}}}},"StateMachine2":{"id":"StateMachine2","path":"SingletonIntegTest/StateMachine2","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.238.0"},"children":{"Role":{"id":"Role","path":"SingletonIntegTest/StateMachine2/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"SingletonIntegTest/StateMachine2/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"}}}}}},"Resource":{"id":"Resource","path":"SingletonIntegTest/StateMachine2/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":"{\"StartAt\":\"Initialize\",\"States\":{\"Initialize\":{\"Type\":\"Pass\",\"QueryLanguage\":\"JSONata\",\"Next\":\"Which Request Type?\",\"Assign\":{\"RequestType\":\"{% $states.input.RequestType %}\",\"StackId\":\"{% $states.input.StackId %}\",\"RequestId\":\"{% $states.input.RequestId %}\",\"ResourceType\":\"{% $states.input.ResourceType %}\",\"LogicalResourceId\":\"{% $states.input.LogicalResourceId %}\",\"PhysicalResourceId\":\"{% $exists($states.input.PhysicalResourceId) ? $states.input.PhysicalResourceId : null %}\",\"ResourceProperties\":\"{% $states.input.ResourceProperties %}\",\"OldResourceProperties\":\"{% $exists($states.input.OldResourceProperties) ? $states.input.OldResourceProperties : null %}\"}},\"Which Request Type?\":{\"Type\":\"Choice\",\"QueryLanguage\":\"JSONata\",\"Choices\":[{\"Condition\":\"{% $RequestType = \\\"Create\\\" %}\",\"Next\":\"Create2\"},{\"Condition\":\"{% $RequestType = \\\"Update\\\" %}\",\"Next\":\"Update\"},{\"Condition\":\"{% $RequestType = \\\"Delete\\\" %}\",\"Next\":\"Delete\"}]},\"Create2\":{\"Type\":\"Pass\",\"QueryLanguage\":\"JSONata\",\"Output\":{\"PhysicalResourceId\":\"resource-2\",\"Data\":{\"message\":\"{% $states.input.ResourceProperties.value %}\"}},\"End\":true},\"Update\":{\"Type\":\"Pass\",\"QueryLanguage\":\"JSONata\",\"End\":true},\"Delete\":{\"Type\":\"Pass\",\"QueryLanguage\":\"JSONata\",\"End\":true}}}","roleArn":{"Fn::GetAtt":["StateMachine2Role6BE3CF0B","Arn"]}}}}}},"CustomResource2":{"id":"CustomResource2","path":"SingletonIntegTest/CustomResource2","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"},"children":{"Resource":{"id":"Resource","path":"SingletonIntegTest/CustomResource2/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.238.0"},"children":{"Default":{"id":"Default","path":"SingletonIntegTest/CustomResource2/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}}}},"Policy":{"id":"Policy","path":"SingletonIntegTest/CustomResource2/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"SingletonIntegTest/CustomResource2/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Ref":"StateMachine21CE8E3CE"}}],"Version":"2012-10-17"},"policyName":"CustomResource2PolicyF11B6D2C","roles":[{"Ref":"LambdalessProviderStateMachineRole4BDCD64E"}]}}}}}}},"Message1":{"id":"Message1","path":"SingletonIntegTest/Message1","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"Message2":{"id":"Message2","path":"SingletonIntegTest/Message2","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SingletonIntegTest/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.238.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SingletonIntegTest/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.238.0"}}}},"SingletonTest":{"id":"SingletonTest","path":"SingletonTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTest","version":"2.238.0-alpha.0"},"children":{"DefaultTest":{"id":"DefaultTest","path":"SingletonTest/DefaultTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTestCase","version":"2.238.0-alpha.0"},"children":{"Default":{"id":"Default","path":"SingletonTest/DefaultTest/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}},"DeployAssert":{"id":"DeployAssert","path":"SingletonTest/DefaultTest/DeployAssert","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.238.0"},"children":{"BootstrapVersion":{"id":"BootstrapVersion","path":"SingletonTest/DefaultTest/DeployAssert/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.238.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SingletonTest/DefaultTest/DeployAssert/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.238.0"}}}}}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}}}}}