{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.238.0"},"children":{"RestrictDefaultSecurityGroupIntegTest":{"id":"RestrictDefaultSecurityGroupIntegTest","path":"RestrictDefaultSecurityGroupIntegTest","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.238.0"},"children":{"Vpc":{"id":"Vpc","path":"RestrictDefaultSecurityGroupIntegTest/Vpc","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"RestrictDefaultSecurityGroupIntegTest/Vpc"}]}}},"PublicSubnet1":{"id":"PublicSubnet1","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.238.0"},"children":{"Subnet":{"id":"Subnet","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/PublicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.0.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"RestrictDefaultSecurityGroupIntegTest/Vpc/PublicSubnet1"}],"vpcId":{"Ref":"Vpc8378EB38"}}}},"Acl":{"id":"Acl","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.238.0"}},"RouteTable":{"id":"RouteTable","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/PublicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"RestrictDefaultSecurityGroupIntegTest/Vpc/PublicSubnet1"}],"vpcId":{"Ref":"Vpc8378EB38"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/PublicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcPublicSubnet1RouteTable6C95E38E"},"subnetId":{"Ref":"VpcPublicSubnet1Subnet5C2D37C4"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/PublicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"VpcIGWD7BA715C"},"routeTableId":{"Ref":"VpcPublicSubnet1RouteTable6C95E38E"}}}}}},"PublicSubnet2":{"id":"PublicSubnet2","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.238.0"},"children":{"Subnet":{"id":"Subnet","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/PublicSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.64.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"RestrictDefaultSecurityGroupIntegTest/Vpc/PublicSubnet2"}],"vpcId":{"Ref":"Vpc8378EB38"}}}},"Acl":{"id":"Acl","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.238.0"}},"RouteTable":{"id":"RouteTable","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/PublicSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"RestrictDefaultSecurityGroupIntegTest/Vpc/PublicSubnet2"}],"vpcId":{"Ref":"Vpc8378EB38"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/PublicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcPublicSubnet2RouteTable94F7E489"},"subnetId":{"Ref":"VpcPublicSubnet2Subnet691E08A3"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/PublicSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"VpcIGWD7BA715C"},"routeTableId":{"Ref":"VpcPublicSubnet2RouteTable94F7E489"}}}}}},"IsolatedSubnet1":{"id":"IsolatedSubnet1","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/IsolatedSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.238.0"},"children":{"Subnet":{"id":"Subnet","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/IsolatedSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.128.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Isolated"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Name","value":"RestrictDefaultSecurityGroupIntegTest/Vpc/IsolatedSubnet1"}],"vpcId":{"Ref":"Vpc8378EB38"}}}},"Acl":{"id":"Acl","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/IsolatedSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.238.0"}},"RouteTable":{"id":"RouteTable","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/IsolatedSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"RestrictDefaultSecurityGroupIntegTest/Vpc/IsolatedSubnet1"}],"vpcId":{"Ref":"Vpc8378EB38"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/IsolatedSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcIsolatedSubnet1RouteTable4771E3E5"},"subnetId":{"Ref":"VpcIsolatedSubnet1SubnetE48C5737"}}}}}},"IsolatedSubnet2":{"id":"IsolatedSubnet2","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/IsolatedSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.238.0"},"children":{"Subnet":{"id":"Subnet","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/IsolatedSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.192.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Isolated"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Name","value":"RestrictDefaultSecurityGroupIntegTest/Vpc/IsolatedSubnet2"}],"vpcId":{"Ref":"Vpc8378EB38"}}}},"Acl":{"id":"Acl","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/IsolatedSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.238.0"}},"RouteTable":{"id":"RouteTable","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/IsolatedSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"RestrictDefaultSecurityGroupIntegTest/Vpc/IsolatedSubnet2"}],"vpcId":{"Ref":"Vpc8378EB38"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/IsolatedSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcIsolatedSubnet2RouteTable1D30AF7D"},"subnetId":{"Ref":"VpcIsolatedSubnet2Subnet16364B91"}}}}}},"IGW":{"id":"IGW","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"RestrictDefaultSecurityGroupIntegTest/Vpc"}]}}},"VPCGW":{"id":"VPCGW","path":"RestrictDefaultSecurityGroupIntegTest/Vpc/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"VpcIGWD7BA715C"},"vpcId":{"Ref":"Vpc8378EB38"}}}}}},"RestrictDefaultSG":{"id":"RestrictDefaultSG","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"},"children":{"RevokeOnCreate":{"id":"RevokeOnCreate","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/RevokeOnCreate","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachineFragment","version":"2.238.0"},"children":{"Fail":{"id":"Fail","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/RevokeOnCreate/Fail","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Fail","version":"2.238.0"}},"RevokeIngress":{"id":"RevokeIngress","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/RevokeOnCreate/RevokeIngress","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.CallAwsService","version":"2.238.0"}},"RevokeEgress":{"id":"RevokeEgress","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/RevokeOnCreate/RevokeEgress","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.CallAwsService","version":"2.238.0"}},"RevokeEgressCatch":{"id":"RevokeEgressCatch","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/RevokeOnCreate/RevokeEgressCatch","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.238.0"}},"RevokeIngressCatch":{"id":"RevokeIngressCatch","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/RevokeOnCreate/RevokeIngressCatch","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.238.0"}},"RevokeIngressPass":{"id":"RevokeIngressPass","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/RevokeOnCreate/RevokeIngressPass","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.238.0"}}}},"NewSecurityGroup?":{"id":"NewSecurityGroup?","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/NewSecurityGroup?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.238.0"}},"AuthorizeOnUpdate":{"id":"AuthorizeOnUpdate","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/AuthorizeOnUpdate","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachineFragment","version":"2.238.0"},"children":{"AuthorizeIngress":{"id":"AuthorizeIngress","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/AuthorizeOnUpdate/AuthorizeIngress","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.CallAwsService","version":"2.238.0"}},"AuthorizeEgress":{"id":"AuthorizeEgress","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/AuthorizeOnUpdate/AuthorizeEgress","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.CallAwsService","version":"2.238.0"}}}},"RevokeOnUpdate":{"id":"RevokeOnUpdate","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/RevokeOnUpdate","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachineFragment","version":"2.238.0"},"children":{"Fail":{"id":"Fail","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/RevokeOnUpdate/Fail","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Fail","version":"2.238.0"}},"RevokeIngress":{"id":"RevokeIngress","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/RevokeOnUpdate/RevokeIngress","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.CallAwsService","version":"2.238.0"}},"RevokeEgress":{"id":"RevokeEgress","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/RevokeOnUpdate/RevokeEgress","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.CallAwsService","version":"2.238.0"}},"RevokeEgressCatch":{"id":"RevokeEgressCatch","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/RevokeOnUpdate/RevokeEgressCatch","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.238.0"}},"RevokeIngressCatch":{"id":"RevokeIngressCatch","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/RevokeOnUpdate/RevokeIngressCatch","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.238.0"}},"RevokeIngressPass":{"id":"RevokeIngressPass","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/RevokeOnUpdate/RevokeIngressPass","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.238.0"}}}},"NoChanges":{"id":"NoChanges","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/NoChanges","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.238.0"}},"AuthorizeOnDelete":{"id":"AuthorizeOnDelete","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/AuthorizeOnDelete","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachineFragment","version":"2.238.0"},"children":{"AuthorizeIngress":{"id":"AuthorizeIngress","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/AuthorizeOnDelete/AuthorizeIngress","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.CallAwsService","version":"2.238.0"}},"AuthorizeEgress":{"id":"AuthorizeEgress","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/AuthorizeOnDelete/AuthorizeEgress","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.CallAwsService","version":"2.238.0"}}}},"Flow":{"id":"Flow","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/Flow","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachineFragment","version":"2.238.0"},"children":{"Which Request Type?":{"id":"Which Request Type?","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/Flow/Which Request Type?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.238.0"}},"Initialize":{"id":"Initialize","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/Flow/Initialize","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.238.0"}}}},"StateMachine":{"id":"StateMachine","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/StateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.238.0"},"children":{"Role":{"id":"Role","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/StateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/StateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/StateMachine/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/StateMachine/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ec2:authorizeSecurityGroupEgress","ec2:authorizeSecurityGroupIngress","ec2:revokeSecurityGroupEgress","ec2:revokeSecurityGroupIngress"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":ec2:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":security-group/",{"Fn::GetAtt":["Vpc8378EB38","DefaultSecurityGroup"]}]]}}],"Version":"2012-10-17"},"policyName":"RestrictDefaultSGStateMachineRoleDefaultPolicy4B169C2B","roles":[{"Ref":"RestrictDefaultSGStateMachineRole014DC528"}]}}}}}}},"Resource":{"id":"Resource","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/StateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"Initialize\",\"States\":{\"Initialize\":{\"Type\":\"Pass\",\"QueryLanguage\":\"JSONata\",\"Next\":\"Which Request Type?\",\"Assign\":{\"RequestType\":\"{% $states.input.RequestType %}\",\"StackId\":\"{% $states.input.StackId %}\",\"RequestId\":\"{% $states.input.RequestId %}\",\"ResourceType\":\"{% $states.input.ResourceType %}\",\"LogicalResourceId\":\"{% $states.input.LogicalResourceId %}\",\"PhysicalResourceId\":\"{% $exists($states.input.PhysicalResourceId) ? $states.input.PhysicalResourceId : null %}\",\"ResourceProperties\":\"{% $states.input.ResourceProperties %}\",\"OldResourceProperties\":\"{% $exists($states.input.OldResourceProperties) ? $states.input.OldResourceProperties : null %}\"}},\"Which Request Type?\":{\"Type\":\"Choice\",\"QueryLanguage\":\"JSONata\",\"Choices\":[{\"Condition\":\"{% $RequestType = \\\"Create\\\" %}\",\"Next\":\"RevokeOnCreate: RevokeEgress\"},{\"Condition\":\"{% $RequestType = \\\"Update\\\" %}\",\"Next\":\"NewSecurityGroup?\"},{\"Condition\":\"{% $RequestType = \\\"Delete\\\" %}\",\"Next\":\"AuthorizeOnDelete: AuthorizeIngress\"}]},\"RevokeOnCreate: RevokeEgress\":{\"QueryLanguage\":\"JSONata\",\"Next\":\"RevokeOnCreate: RevokeIngress\",\"Catch\":[{\"Output\":\"{% $states.errorOutput %}\",\"ErrorEquals\":[\"States.ALL\"],\"Next\":\"RevokeOnCreate: RevokeEgressCatch\"}],\"Type\":\"Task\",\"Arguments\":{\"GroupId\":\"{% $ResourceProperties.DefaultSecurityGroupId %}\",\"IpPermissions\":[{\"IpRanges\":[{\"CidrIp\":\"0.0.0.0/0\"}],\"IpProtocol\":\"-1\"}]},\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::aws-sdk:ec2:revokeSecurityGroupEgress\"},\"RevokeOnCreate: RevokeIngress\":{\"QueryLanguage\":\"JSONata\",\"End\":true,\"Catch\":[{\"Output\":\"{% $states.errorOutput %}\",\"ErrorEquals\":[\"States.ALL\"],\"Next\":\"RevokeOnCreate: RevokeIngressCatch\"}],\"Type\":\"Task\",\"Arguments\":{\"GroupId\":\"{% $ResourceProperties.DefaultSecurityGroupId %}\",\"IpPermissions\":[{\"UserIdGroupPairs\":[{\"GroupId\":\"{% $ResourceProperties.DefaultSecurityGroupId %}\",\"UserId\":\"{% $ResourceProperties.Account %}\"}],\"IpProtocol\":\"-1\"}]},\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::aws-sdk:ec2:revokeSecurityGroupIngress\"},\"RevokeOnCreate: RevokeEgressCatch\":{\"Type\":\"Choice\",\"QueryLanguage\":\"JSONata\",\"Choices\":[{\"Condition\":\"{% $contains($states.input.Cause, 'The specified rule does not exist in this security group') %}\",\"Next\":\"RevokeOnCreate: RevokeIngress\"}],\"Default\":\"RevokeOnCreate: Fail\"},\"RevokeOnCreate: Fail\":{\"Type\":\"Fail\",\"QueryLanguage\":\"JSONata\",\"Error\":\"{% $states.input.Error %}\",\"Cause\":\"{% $states.input.Cause %}\"},\"RevokeOnCreate: RevokeIngressCatch\":{\"Type\":\"Choice\",\"QueryLanguage\":\"JSONata\",\"Choices\":[{\"Condition\":\"{% $contains($states.input.Cause, 'The specified rule does not exist in this security group') %}\",\"Next\":\"RevokeOnCreate: RevokeIngressPass\"}],\"Default\":\"RevokeOnCreate: Fail\"},\"RevokeOnCreate: RevokeIngressPass\":{\"Type\":\"Pass\",\"QueryLanguage\":\"JSONata\",\"End\":true},\"NewSecurityGroup?\":{\"Type\":\"Choice\",\"QueryLanguage\":\"JSONata\",\"Choices\":[{\"Condition\":\"{% $OldResourceProperties.DefaultSecurityGroupId != $ResourceProperties.DefaultSecurityGroupId %}\",\"Next\":\"AuthorizeOnUpdate: AuthorizeIngress\"}],\"Default\":\"NoChanges\"},\"NoChanges\":{\"Type\":\"Pass\",\"QueryLanguage\":\"JSONata\",\"End\":true},\"AuthorizeOnUpdate: AuthorizeIngress\":{\"QueryLanguage\":\"JSONata\",\"Next\":\"AuthorizeOnUpdate: AuthorizeEgress\",\"Type\":\"Task\",\"Arguments\":{\"GroupId\":\"{% $OldResourceProperties.DefaultSecurityGroupId %}\",\"IpPermissions\":[{\"UserIdGroupPairs\":[{\"GroupId\":\"{% $OldResourceProperties.DefaultSecurityGroupId %}\",\"UserId\":\"{% $ResourceProperties.Account %}\"}],\"IpProtocol\":\"-1\"}]},\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::aws-sdk:ec2:authorizeSecurityGroupIngress\"},\"AuthorizeOnUpdate: AuthorizeEgress\":{\"QueryLanguage\":\"JSONata\",\"Next\":\"RevokeOnUpdate: RevokeEgress\",\"Type\":\"Task\",\"Arguments\":{\"GroupId\":\"{% $OldResourceProperties.DefaultSecurityGroupId %}\",\"IpPermissions\":[{\"IpRanges\":[{\"CidrIp\":\"0.0.0.0/0\"}],\"IpProtocol\":\"-1\"}]},\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::aws-sdk:ec2:authorizeSecurityGroupEgress\"},\"RevokeOnUpdate: RevokeEgress\":{\"QueryLanguage\":\"JSONata\",\"Next\":\"RevokeOnUpdate: RevokeIngress\",\"Catch\":[{\"Output\":\"{% $states.errorOutput %}\",\"ErrorEquals\":[\"States.ALL\"],\"Next\":\"RevokeOnUpdate: RevokeEgressCatch\"}],\"Type\":\"Task\",\"Arguments\":{\"GroupId\":\"{% $ResourceProperties.DefaultSecurityGroupId %}\",\"IpPermissions\":[{\"IpRanges\":[{\"CidrIp\":\"0.0.0.0/0\"}],\"IpProtocol\":\"-1\"}]},\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::aws-sdk:ec2:revokeSecurityGroupEgress\"},\"RevokeOnUpdate: RevokeIngress\":{\"QueryLanguage\":\"JSONata\",\"End\":true,\"Catch\":[{\"Output\":\"{% $states.errorOutput %}\",\"ErrorEquals\":[\"States.ALL\"],\"Next\":\"RevokeOnUpdate: RevokeIngressCatch\"}],\"Type\":\"Task\",\"Arguments\":{\"GroupId\":\"{% $ResourceProperties.DefaultSecurityGroupId %}\",\"IpPermissions\":[{\"UserIdGroupPairs\":[{\"GroupId\":\"{% $ResourceProperties.DefaultSecurityGroupId %}\",\"UserId\":\"{% $ResourceProperties.Account %}\"}],\"IpProtocol\":\"-1\"}]},\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::aws-sdk:ec2:revokeSecurityGroupIngress\"},\"RevokeOnUpdate: RevokeEgressCatch\":{\"Type\":\"Choice\",\"QueryLanguage\":\"JSONata\",\"Choices\":[{\"Condition\":\"{% $contains($states.input.Cause, 'The specified rule does not exist in this security group') %}\",\"Next\":\"RevokeOnUpdate: RevokeIngress\"}],\"Default\":\"RevokeOnUpdate: Fail\"},\"RevokeOnUpdate: Fail\":{\"Type\":\"Fail\",\"QueryLanguage\":\"JSONata\",\"Error\":\"{% $states.input.Error %}\",\"Cause\":\"{% $states.input.Cause %}\"},\"RevokeOnUpdate: RevokeIngressCatch\":{\"Type\":\"Choice\",\"QueryLanguage\":\"JSONata\",\"Choices\":[{\"Condition\":\"{% $contains($states.input.Cause, 'The specified rule does not exist in this security group') %}\",\"Next\":\"RevokeOnUpdate: RevokeIngressPass\"}],\"Default\":\"RevokeOnUpdate: Fail\"},\"RevokeOnUpdate: RevokeIngressPass\":{\"Type\":\"Pass\",\"QueryLanguage\":\"JSONata\",\"End\":true},\"AuthorizeOnDelete: AuthorizeIngress\":{\"QueryLanguage\":\"JSONata\",\"Next\":\"AuthorizeOnDelete: AuthorizeEgress\",\"Type\":\"Task\",\"Arguments\":{\"GroupId\":\"{% $ResourceProperties.DefaultSecurityGroupId %}\",\"IpPermissions\":[{\"UserIdGroupPairs\":[{\"GroupId\":\"{% $ResourceProperties.DefaultSecurityGroupId %}\",\"UserId\":\"{% $ResourceProperties.Account %}\"}],\"IpProtocol\":\"-1\"}]},\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::aws-sdk:ec2:authorizeSecurityGroupIngress\"},\"AuthorizeOnDelete: AuthorizeEgress\":{\"QueryLanguage\":\"JSONata\",\"End\":true,\"Type\":\"Task\",\"Arguments\":{\"GroupId\":\"{% $ResourceProperties.DefaultSecurityGroupId %}\",\"IpPermissions\":[{\"IpRanges\":[{\"CidrIp\":\"0.0.0.0/0\"}],\"IpProtocol\":\"-1\"}]},\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::aws-sdk:ec2:authorizeSecurityGroupEgress\"}}}"]]},"roleArn":{"Fn::GetAtt":["RestrictDefaultSGStateMachineRole014DC528","Arn"]}}}}}},"Resource":{"id":"Resource","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"},"children":{"Resource":{"id":"Resource","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/Resource/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.238.0"},"children":{"Default":{"id":"Default","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/Resource/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}}}},"Policy":{"id":"Policy","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/Resource/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"RestrictDefaultSecurityGroupIntegTest/RestrictDefaultSG/Resource/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["states:ListExecutions","states:ListStateMachines","states:StartExecution"],"Effect":"Allow","Resource":{"Ref":"RestrictDefaultSGStateMachineFD1CE043"}},{"Action":["states:DescribeExecution","states:DescribeStateMachineForExecution","states:GetExecutionHistory"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":states:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":execution:",{"Fn::Select":[6,{"Fn::Split":[":",{"Ref":"RestrictDefaultSGStateMachineFD1CE043"}]}]},":*"]]}},{"Action":["states:DescribeActivity","states:DescribeStateMachine","states:ListActivities"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"RestrictDefaultSGPolicyB2BC8CF4","roles":[{"Ref":"LambdalessProviderStateMachineRole4BDCD64E"}]}}}}}}}}},"LambdalessProvider":{"id":"LambdalessProvider","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"},"children":{"Topic":{"id":"Topic","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Topic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Topic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{}}}}},"Queue":{"id":"Queue","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Queue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Queue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{}}},"Policy":{"id":"Policy","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Queue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Queue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Condition":{"ArnEquals":{"aws:SourceArn":{"Ref":"LambdalessProviderTopic58DC2415"}}},"Effect":"Allow","Principal":{"Service":"sns.amazonaws.com"},"Resource":{"Fn::GetAtt":["LambdalessProviderQueue3E954037","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"LambdalessProviderQueue3E954037"}]}}}}},"RestrictDefaultSecurityGroupIntegTestLambdalessProviderTopicB7B9DB66":{"id":"RestrictDefaultSecurityGroupIntegTestLambdalessProviderTopicB7B9DB66","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Queue/RestrictDefaultSecurityGroupIntegTestLambdalessProviderTopicB7B9DB66","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Subscription","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Queue/RestrictDefaultSecurityGroupIntegTestLambdalessProviderTopicB7B9DB66/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnSubscription","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Subscription","aws:cdk:cloudformation:props":{"endpoint":{"Fn::GetAtt":["LambdalessProviderQueue3E954037","Arn"]},"protocol":"sqs","topicArn":{"Ref":"LambdalessProviderTopic58DC2415"}}}}}}}},"Connection":{"id":"Connection","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Connection","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Connection","version":"2.238.0"},"children":{"Connection":{"id":"Connection","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Connection/Connection","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnConnection","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Connection","aws:cdk:cloudformation:props":{"authorizationType":"API_KEY","authParameters":{"apiKeyAuthParameters":{"apiKeyName":"dummy","apiKeyValue":"dummy"}}}}}}},"Initialize":{"id":"Initialize","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Initialize","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.238.0"}},"Still Running":{"id":"Still Running","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Still Running","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Wait","version":"2.238.0"}},"Start Execution":{"id":"Start Execution","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Start Execution","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.CallAwsService","version":"2.238.0"}},"Describe Execution":{"id":"Describe Execution","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Describe Execution","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.CallAwsService","version":"2.238.0"}},"Response to CloudFormation":{"id":"Response to CloudFormation","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Response to CloudFormation","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.HttpInvoke","version":"2.238.0"}},"Is finished?":{"id":"Is finished?","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Is finished?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.238.0"}},"Given workflow was failed":{"id":"Given workflow was failed","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Given workflow was failed","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.238.0"}},"StateMachine":{"id":"StateMachine","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/StateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.238.0"},"children":{"Role":{"id":"Role","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/StateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/StateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/StateMachine/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/StateMachine/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["states:describeExecution","states:startExecution"],"Condition":{"StringEquals":{"aws:RequestedRegion":"DISABLED"}},"Effect":"Allow","Resource":"*"},{"Action":"events:RetrieveConnectionCredentials","Effect":"Allow","Resource":{"Fn::GetAtt":["LambdalessProviderConnection803AC994","Arn"]}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::GetAtt":["LambdalessProviderConnection803AC994","SecretArn"]}},{"Action":"states:InvokeHTTPEndpoint","Condition":{"StringLike":{"states:HTTPEndpoint":"*"}},"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LambdalessProviderStateMachineRoleDefaultPolicy613E8B8C","roles":[{"Ref":"LambdalessProviderStateMachineRole4BDCD64E"}]}}}}}}},"Resource":{"id":"Resource","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/StateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"Initialize\",\"States\":{\"Initialize\":{\"Type\":\"Pass\",\"Next\":\"Describe Execution\",\"Assign\":{\"ExecutionArn\":\"{% $replace($states.input.ResourceProperties.stateMachineArn, 'stateMachine', 'execution') & ':' & $states.input.RequestId %}\",\"RequestType\":\"{% $states.input.RequestType %}\",\"ResponseURL\":\"{% $states.input.ResponseURL %}\",\"StackId\":\"{% $states.input.StackId %}\",\"RequestId\":\"{% $states.input.RequestId %}\",\"ResourceType\":\"{% $states.input.ResourceType %}\",\"LogicalResourceId\":\"{% $states.input.LogicalResourceId %}\",\"PhysicalResourceId\":\"{% $exists($states.input.PhysicalResourceId) ? $states.input.PhysicalResourceId : null %}\",\"ResourceProperties\":\"{% $states.input.ResourceProperties %}\",\"OldResourceProperties\":\"{% $exists($states.input.OldResourceProperties) ? $states.input.OldResourceProperties : null %}\"}},\"Describe Execution\":{\"Next\":\"Is finished?\",\"Catch\":[{\"ErrorEquals\":[\"States.ALL\"],\"Next\":\"Start Execution\"}],\"Type\":\"Task\",\"Arguments\":{\"ExecutionArn\":\"{% $ExecutionArn %}\",\"IncludedData\":\"ALL_DATA\"},\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::aws-sdk:sfn:describeExecution\"},\"Still Running\":{\"Type\":\"Wait\",\"Seconds\":1,\"Next\":\"Describe Execution\"},\"Start Execution\":{\"Next\":\"Still Running\",\"Type\":\"Task\",\"Arguments\":{\"Name\":\"{% $RequestId %}\",\"Input\":{\"RequestType\":\"{% $RequestType %}\",\"StackId\":\"{% $StackId %}\",\"RequestId\":\"{% $RequestId %}\",\"ResourceType\":\"{% $ResourceType %}\",\"LogicalResourceId\":\"{% $LogicalResourceId %}\",\"PhysicalResourceId\":\"{% $PhysicalResourceId %}\",\"ResourceProperties\":\"{% $ResourceProperties %}\",\"OldResourceProperties\":\"{% $OldResourceProperties %}\"},\"StateMachineArn\":\"{% $ResourceProperties.stateMachineArn %}\"},\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::aws-sdk:sfn:startExecution\"},\"Is finished?\":{\"Type\":\"Choice\",\"Choices\":[{\"Condition\":\"{% $states.input.Status = 'RUNNING' %}\",\"Next\":\"Still Running\"},{\"Condition\":\"{% $states.input.Status = 'SUCCEEDED' %}\",\"Output\":\"{% $parse($states.input.Output) %}\",\"Next\":\"Response to CloudFormation\"}],\"Default\":\"Given workflow was failed\"},\"Given workflow was failed\":{\"Type\":\"Pass\",\"Output\":{\"Status\":\"FAILED\",\"Reason\":\"{% $states.input.Error & ': ' & $states.input.Cause %}\"},\"Next\":\"Response to CloudFormation\"},\"Response to CloudFormation\":{\"End\":true,\"Type\":\"Task\",\"Arguments\":{\"ApiEndpoint\":\"{% $match($ResponseURL, /(https://[^/]+)\\\\/(.*)\\\\?/).groups[0] & '/' & $match($ResponseURL, /(https://[^/]+)\\\\/(.*)\\\\?/).groups[1] ~> $decodeUrlComponent() %}\",\"Authentication\":{\"ConnectionArn\":\"",{"Fn::GetAtt":["LambdalessProviderConnection803AC994","Arn"]},"\"},\"Method\":\"PUT\",\"RequestBody\":{\"Status\":\"{% $exists($states.input.Status) ? $states.input.Status : 'SUCCESS' %}\",\"StackId\":\"{% $StackId %}\",\"RequestId\":\"{% $RequestId %}\",\"LogicalResourceId\":\"{% $LogicalResourceId %}\",\"Data\":\"{% (\\n            $deepSpread := function($value, $path, $arr) {(\\n                $arr := $arr ? $arr : [];\\n                $t := $type($value);\\n                $result := \\n                $t = \\\"object\\\" ? $each($value, function($v, $k){\\n                    $deepSpread($v, $path ? $path & \\\".\\\" & $k : $k, $arr)\\n                }) : \\n                $t = \\\"array\\\" ? $map($value, function($el, $index){\\n                    $deepSpread($el, $path ? $path & \\\".\\\" & $string($index) : $string($index), $arr)\\n                }) :\\n                {\\n                    $path: $string($value)\\n                };\\n                $append($arr, $result) ~> $merge\\n            )};\\n            $exists($states.input.Data) ? $deepSpread($states.input.Data) : {}\\n            ) %}\",\"NoEcho\":\"{% $exists($states.input.NoEcho) ? $states.input.NoEcho : false %}\",\"PhysicalResourceId\":\"{% $exists($states.input.PhysicalResourceId) ? $states.input.PhysicalResourceId : $RequestId %}\",\"Reason\":\"{% $exists($states.input.Reason) ? $states.input.Reason : '' %}\"},\"QueryParameters\":\"{% $ResponseURL ~> $substringAfter('?') ~> $split('&') ~> $map(function($v) {( $kv := $split($v, '='); {$kv[0]: $decodeUrlComponent($kv[1])} )}) ~> $merge %}\"},\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::http:invoke\"}},\"QueryLanguage\":\"JSONata\"}"]]},"roleArn":{"Fn::GetAtt":["LambdalessProviderStateMachineRole4BDCD64E","Arn"]},"stateMachineType":"EXPRESS"}}}}},"Pipe":{"id":"Pipe","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Pipe","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"},"children":{"Role":{"id":"Role","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Pipe/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Pipe/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"pipes.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Pipe/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.238.0"},"children":{"Resource":{"id":"Resource","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Pipe/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["LambdalessProviderQueue3E954037","Arn"]}},{"Action":"states:StartSyncExecution","Effect":"Allow","Resource":{"Ref":"LambdalessProviderStateMachine7D8C8128"}}],"Version":"2012-10-17"},"policyName":"LambdalessProviderPipeRoleDefaultPolicy918C6032","roles":[{"Ref":"LambdalessProviderPipeRoleD3BC051F"}]}}}}}}},"Resource":{"id":"Resource","path":"RestrictDefaultSecurityGroupIntegTest/LambdalessProvider/Pipe/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_pipes.CfnPipe","version":"2.238.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Pipes::Pipe","aws:cdk:cloudformation:props":{"description":"Auto generated by AWS CDK Custom Resource","roleArn":{"Fn::GetAtt":["LambdalessProviderPipeRoleD3BC051F","Arn"]},"source":{"Fn::GetAtt":["LambdalessProviderQueue3E954037","Arn"]},"sourceParameters":{"sqsQueueParameters":{"batchSize":1}},"target":{"Ref":"LambdalessProviderStateMachine7D8C8128"},"targetParameters":{"inputTemplate":"<$.body.Message>","stepFunctionStateMachineParameters":{"invocationType":"REQUEST_RESPONSE"}}}}}}}}},"Exports":{"id":"Exports","path":"RestrictDefaultSecurityGroupIntegTest/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"},"children":{"Output{\"Fn::GetAtt\":[\"Vpc8378EB38\",\"DefaultSecurityGroup\"]}":{"id":"Output{\"Fn::GetAtt\":[\"Vpc8378EB38\",\"DefaultSecurityGroup\"]}","path":"RestrictDefaultSecurityGroupIntegTest/Exports/Output{\"Fn::GetAtt\":[\"Vpc8378EB38\",\"DefaultSecurityGroup\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"RestrictDefaultSecurityGroupIntegTest/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.238.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"RestrictDefaultSecurityGroupIntegTest/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.238.0"}}}},"RestrictDefaultSecurityGroupTest":{"id":"RestrictDefaultSecurityGroupTest","path":"RestrictDefaultSecurityGroupTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTest","version":"2.238.0-alpha.0"},"children":{"DefaultTest":{"id":"DefaultTest","path":"RestrictDefaultSecurityGroupTest/DefaultTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTestCase","version":"2.238.0-alpha.0"},"children":{"Default":{"id":"Default","path":"RestrictDefaultSecurityGroupTest/DefaultTest/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}},"DeployAssert":{"id":"DeployAssert","path":"RestrictDefaultSecurityGroupTest/DefaultTest/DeployAssert","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.238.0"},"children":{"AwsApiCallEC2describeSecurityGroups6ad015b9cce9b36a98cd9794471d1ab0":{"id":"AwsApiCallEC2describeSecurityGroups6ad015b9cce9b36a98cd9794471d1ab0","path":"RestrictDefaultSecurityGroupTest/DefaultTest/DeployAssert/AwsApiCallEC2describeSecurityGroups6ad015b9cce9b36a98cd9794471d1ab0","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.AwsApiCall","version":"2.238.0-alpha.0"},"children":{"SdkProvider":{"id":"SdkProvider","path":"RestrictDefaultSecurityGroupTest/DefaultTest/DeployAssert/AwsApiCallEC2describeSecurityGroups6ad015b9cce9b36a98cd9794471d1ab0/SdkProvider","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.AssertionsProvider","version":"2.238.0-alpha.0"},"children":{"AssertionsProvider":{"id":"AssertionsProvider","path":"RestrictDefaultSecurityGroupTest/DefaultTest/DeployAssert/AwsApiCallEC2describeSecurityGroups6ad015b9cce9b36a98cd9794471d1ab0/SdkProvider/AssertionsProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}}}},"Default":{"id":"Default","path":"RestrictDefaultSecurityGroupTest/DefaultTest/DeployAssert/AwsApiCallEC2describeSecurityGroups6ad015b9cce9b36a98cd9794471d1ab0/Default","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.238.0"},"children":{"Default":{"id":"Default","path":"RestrictDefaultSecurityGroupTest/DefaultTest/DeployAssert/AwsApiCallEC2describeSecurityGroups6ad015b9cce9b36a98cd9794471d1ab0/Default/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}}}},"AssertionResults":{"id":"AssertionResults","path":"RestrictDefaultSecurityGroupTest/DefaultTest/DeployAssert/AwsApiCallEC2describeSecurityGroups6ad015b9cce9b36a98cd9794471d1ab0/AssertionResults","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.238.0"}}}},"SingletonFunction1488541a7b23466481b69b4408076b81":{"id":"SingletonFunction1488541a7b23466481b69b4408076b81","path":"RestrictDefaultSecurityGroupTest/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"},"children":{"Staging":{"id":"Staging","path":"RestrictDefaultSecurityGroupTest/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.238.0"}},"Role":{"id":"Role","path":"RestrictDefaultSecurityGroupTest/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}},"Handler":{"id":"Handler","path":"RestrictDefaultSecurityGroupTest/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.238.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"RestrictDefaultSecurityGroupTest/DefaultTest/DeployAssert/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.238.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"RestrictDefaultSecurityGroupTest/DefaultTest/DeployAssert/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.238.0"}}}}}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.0.5"}}}}}